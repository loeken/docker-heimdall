name: check last version
on:
  push:
    branches: [ main ]
  # schedule:
  # -  cron: '0 10 * * *'
    
jobs:
  check_version:
    runs-on: ubuntu-22.04
    steps:
      - id: check_version
        uses: pozetroninc/github-action-get-latest-release@master
        with:
          owner: linuxserver
          repo: Heimdall
          excludes: prerelease, draft
        run: |
          echo "RELEASE=${{ steps.test.outputs.release }}" >> $GITHUB_ENV
      - name: fail when not matching
        if: steps.check_version.outputs.release != 'v2.5.3'
        run: echo "last version "${{ env.RELEASE }}" != 'v2.5.3'" && exit 1  